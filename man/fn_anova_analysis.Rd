% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fn_anova_analysis.R
\name{fn_anova_analysis}
\alias{fn_anova_analysis}
\title{Perform ANOVA Analysis Across Multiple Stages}
\usage{
fn_anova_analysis(
  data,
  col_stage_current,
  col_score,
  cols_demographics,
  cols_anova,
  min_group_pct = 2,
  min_group_n = 5,
  remove_na_missing = TRUE
)
}
\arguments{
\item{data}{A data frame containing the dataset to analyze}

\item{col_stage_current}{Character string specifying the column name that
contains the current stage information}

\item{col_score}{Character string specifying the column name that contains
the dependent variable (score) for ANOVA analysis}

\item{cols_demographics}{Character vector of column names that represent
all available demographic variables in the dataset}

\item{cols_anova}{Character vector of column names specifying which
demographic factors to include in the ANOVA analysis. Must be a subset
of cols_demographics}

\item{min_group_pct}{Numeric value specifying the minimum percentage of
observations required in each group for a factor to be included in analysis.
Default is 2 (representing 2%)}

\item{min_group_n}{Integer specifying the minimum number of observations
required in each group for a factor to be included in analysis. Default is 5}

\item{remove_na_missing}{Logical indicating whether to remove rows with
NA values or "Missing" entries in relevant columns. Default is TRUE}
}
\value{
A list containing two elements:
\describe{
  \item{anova_results}{A data frame with ANOVA results including Factor,
    StageCurrent, Method, degrees of freedom, Sum of Squares, RSS,
    F-Statistic, and P-Value}
  \item{exclusion_summary}{A data frame summarizing exclusions for each
    stage including original sample size, excluded missing data, and
    which demographics were included/excluded}
}
}
\description{
This function performs ANOVA analysis on a dataset across different stages,
with filtering for group sizes and handling of missing data. It runs both
individual and combined ANOVA tests for specified demographic factors.
}
\details{
The function performs three types of ANOVA analysis:
\itemize{
  \item Individual: Separate one-way ANOVA for each valid factor
  \item All: Combined ANOVA using all valid factors simultaneously
  \item All - Drop1: Type III ANOVA using drop1() with F-test
}

Factors are excluded from analysis if they don't meet the minimum group
size requirements (both absolute count and percentage) or if they have
only one unique value.
}
\examples{
# Create sample data
set.seed(123)
sample_data <- data.frame(
  stage = rep(c("Stage1", "Stage2"), each = 100),
  score = c(rnorm(100, 75, 10), rnorm(100, 80, 12)),
  gender = sample(c("Male", "Female"), 200, replace = TRUE),
  age_group = sample(c("Young", "Middle", "Old"), 200, replace = TRUE),
  education = sample(c("High School", "College", "Graduate"), 200, replace = TRUE),
  income = sample(c("Low", "Medium", "High"), 200, replace = TRUE)
)

# Define demographic columns
demo_cols <- c("gender", "age_group", "education", "income")
anova_cols <- c("gender", "age_group", "education")

# Run ANOVA analysis
results <- fn_anova_analysis(
  data = sample_data,
  col_stage_current = "stage",
  col_score = "score",
  cols_demographics = demo_cols,
  cols_anova = anova_cols,
  min_group_pct = 5,
  min_group_n = 10
)

# View results
print(results$anova_results)
print(results$exclusion_summary)

}
